# 牧場物語 來吧！風之繁華市集 物品查詢工具

## 專案簡介

這是一個互動式網頁工具，用於查詢《牧場物語：來吧！風之繁華市集》遊戲中的物品資訊，包括農作物、風車加工品和料理。

## 功能特色

### 🌾 農作物查詢
- 109 種農作物資料（含 44 個變異種）
- 顯示種植季節、成長天數、連作資訊、收穫量、價格
- 支援季節篩選（春/夏/秋/冬）
- 支援連作作物篩選
- 成長天數滑桿篩選（0-30天）
- 農作物名稱可點擊搜尋

### ⚙️ 風車加工品查詢
- 271 種加工品資料
- 支援風車類型篩選（紅色/藍色/黃色風車）
- 支援類別篩選（工具、材料、食材、種子、肥料、禮物、市集擺設、其他）
- 顯示所需材料，材料可點擊搜尋
- 不同風車和類別有視覺化顏色標記

### 🍳 料理查詢
- 266 種料理資料
- 顯示材料、巧思材料、效果、恢復量、價格
- 支援類別篩選（主菜、前菜、沙拉、湯類、甜點、其他、果汁、茶）
- 支援恢復量篩選（少量/普通/很多/超多）
- 支援效果篩選（13 種不同效果）
- 可選擇「只搜尋材料」或「材料+巧思」
- 不同料理類別有視覺化顏色標記

### 🔍 搜尋功能
- 全域搜尋：支援材料名稱搜尋
- 支援多個材料搜尋（半形逗號或空格分隔）
- 兩種搜尋模式：
  - **OR 模式**：符合任一材料即顯示
  - **AND 模式**：需符合全部材料才顯示
- 智能處理 "or" 分隔的材料（點擊自動轉換為逗號分隔）
- 即時顯示各分頁的搜尋結果數量
- 材料標籤可點擊快速搜尋

### 📊 其他功能
- 所有欄位支援排序（名稱、價格、天數、收穫量）
- 響應式設計，支援手機瀏覽
- 變異種農作物自動繼承基礎作物資料
- 季節移除後綴處理（如：番茄(夏秋) → 番茄）

## 技術架構

### 資料處理流程

```
Excel 原始資料 (道具資料表.xlsx)
    ↓
Python 解析處理
    ├─ 解析農作物（處理變異種繼承）
    ├─ 解析風車加工品（處理材料字串）
    └─ 解析料理（分離材料與巧思）
    ↓
JSON 資料檔 (game_data_final_processed.json)
    ↓
嵌入 HTML 單檔應用
```

### 核心檔案

1. **道具資料表.xlsx** - 原始資料來源
   - 農作物工作表：包含所有作物資訊
   - 風車加工品工作表：包含加工品和材料配方
   - 料理工作表：包含料理配方和效果

2. **遊戲資料處理腳本**
   - 處理變異種農作物（44 種）的資料繼承
   - 解析材料字串（支援 "or" 分隔、季節後綴移除）
   - 生成結構化 JSON 資料

3. **牧場物語物品查詢工具.html** - 最終產出的單檔應用
   - 包含完整資料（646 個項目）
   - 純前端實作，無需伺服器
   - 檔案大小約 116 KB

## 資料結構

### 農作物資料格式
```json
{
  "name": "蕪菁",
  "season": "春",
  "seasons": ["春"],
  "days": 4,
  "regrow": "",
  "harvest": 1.5,
  "price": 200,
  "continuous": ""
}
```

### 加工品資料格式
```json
{
  "name": "起司",
  "windmill": "紅色風車",
  "category": "食材",
  "materials": ["牛奶 *1", "鹽 *1"],
  "price": 400
}
```

### 料理資料格式
```json
{
  "name": "通心粉沙拉",
  "category": "沙拉料理",
  "price": 1859,
  "recovery": "少量",
  "effect": "體力消耗減少LV4",
  "materials": ["義大利麵", "小黃瓜", "美乃滋 or 香草美乃滋 or 頂級美乃滋", "胡蘿蔔"],
  "ingenuity": ["筆管義大利麵", "香草義大利麵", "洋蔥", "鹽", "胡椒"]
}
```

## 變異種處理邏輯

變異種農作物會自動繼承基礎作物的資料：

### 自動前綴識別
- 巨大、扭曲、結實、黃金等前綴

### 手動對應表
特殊命名的變異種需要手動對應：
```python
variant_mapping = {
    '星形馬鈴薯': '馬鈴薯',
    '愛心西瓜': '西瓜',
    '珠寶哈密瓜': '哈密瓜',
    '三腳胡蘿蔔': '胡蘿蔔',
    # ... 等 24 種特殊命名
}
```

## 顏色設計

### 季節顏色
- 春：淺綠色 (#90ee90)
- 夏：紅色 (#ff6b6b)
- 秋：橘色 (#ffa500)
- 冬：天藍色 (#87ceeb)

### 風車顏色
- 紅色風車：粉紅底 (#ffcdd2)
- 藍色風車：淺藍底 (#bbdefb)
- 黃色風車：淺黃底 (#fff9c4)

### 類別顏色
每個加工品類別和料理類別都有專屬的配色方案，提供視覺化識別。

## 如何更新資料

1. **更新 Excel 原始檔**
   - 編輯 `道具資料表.xlsx`
   - 確保欄位格式一致

2. **執行資料處理**
   ```python
   # 載入並解析 Excel
   # 處理變異種繼承
   # 解析材料字串
   # 生成 JSON
   ```

3. **生成新的 HTML**
   - 將 JSON 嵌入 HTML 模板
   - 測試所有功能
   - 輸出最終檔案

## 未來改進方向

- [ ] 加入圖片顯示功能
- [ ] 支援匯出功能（CSV/PDF）
- [ ] 加入收藏/標記功能
- [ ] 價格計算器（考慮加工利潤）
- [ ] 離線 PWA 支援
- [ ] 深色模式

## 資料來源

資料來源：[巴哈姆特 牧場物語 來吧！風之繁華市集 哈啦板](https://forum.gamer.com.tw/C.php?bsn=1405&snA=26965)

感謝玩家們的資料整理與分享 ❤️

## 授權

本專案為粉絲自製工具，遊戲相關內容版權歸原廠商所有。

---

**最後更新：** 2025年10月26日
**總項目數：** 646 個（農作物 109 + 加工品 271 + 料理 266）